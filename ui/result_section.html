<div class="bg-white rounded-2xl shadow-xl p-6 md:p-8 mb-8">
    <h3 class="text-2xl font-bold mb-6 flex items-center">
        <i class="fa fa-file-text-o text-primary mr-3"></i> 全文摘要
    </h3>
    <div class="text-gray-700 leading-relaxed">
        {{ summary }}
    </div>
</div>

<div class="bg-white rounded-2xl shadow-xl p-6 md:p-8 mb-8">
    <h3 class="text-2xl font-bold mb-6 flex items-center">
        <i class="fa fa-star text-accent mr-3"></i> 全文亮点
    </h3>
    <ul class="space-y-3 text-gray-700">
        {% for highlight in highlights %}
        <li class="flex items-start">
            <i class="fa fa-check-circle text-secondary mt-1 mr-3"></i>
            <span>{{ highlight }}</span>
        </li>
        {% endfor %}
    </ul>
</div>

<div class="bg-white rounded-2xl shadow-xl p-6 md:p-8">
    <h3 class="text-2xl font-bold mb-8 flex items-center">
        <i class="fa fa-film text-primary mr-3"></i> 分段总结
    </h3>

    <!-- 分段 -->
    {% for group in groups %}
    <div class="mb-10 pb-10 border-b border-gray-100 last:border-0 last:mb-0 last:pb-0">
        <div class="flex flex-col md:flex-row gap-6">
            <!-- 左侧视频截图 -->
            <div class="md:w-1/4 flex-shrink-0 h-48 rounded-xl overflow-hidden shadow-md">
                <div class="relative">
                    <img src="{{ group.img_url or 'https://picsum.photos/id/237/400/300' }}" alt="视频截图"
                         class="w-full h-auto object-cover">
                    <div class="absolute bottom-0 left-0 right-0 p-2 gradient-overlay">
                        <i class="fa fa-play-circle text-white text-xl"></i>
                    </div>
                </div>
            </div>

            <!-- 右侧摘要内容 -->
            <div class="md:w-3/4">
                <h4 class="text-xl font-semibold mb-3">{{ group.title }}</h4>
                <p class="text-gray-700 mb-4 leading-relaxed">
                    {{ group.summary }}
                </p>
                <p class="text-gray-500 text-sm mb-3">{{ group.part_begin_time or '未知' }} - {{ group.part_end_time or '未知' }}</p>

                <!-- 查看字幕按钮 -->
                <button class="toggle-subtitles text-primary font-medium flex items-center hover:text-primary/80 transition-colors"
                        data-target="subtitles-{{ loop.index }}">
                    <i class="fa fa-comment-o mr-2"></i> 查看字幕
                    <i class="fa fa-chevron-down ml-2 transition-transform duration-300"></i>
                </button>
                <!-- 字幕内容 (默认隐藏) -->
                <div id="subtitles-{{ loop.index }}" class="mt-4 bg-gray-50 rounded-lg p-4 max-h-0 overflow-hidden transition-height">
                    <div class="space-y-3 text-sm">
                        {% for sentence in group.sentences %}
                        <div>
                            <span class="text-primary font-medium">{{ sentence.begin_time }} - {{ sentence.end_time }}</span>
                            <p class="text-gray-700">
                                {{ sentence.text }}
                            </p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>